# é”™è¯¯ç è§„èŒƒæ–‡æ¡£

## ğŸ“‹ é”™è¯¯ç è®¾è®¡åŸåˆ™

### 1. é”™è¯¯ç æ ¼å¼
```
[æœåŠ¡ä»£ç ][æ¨¡å—ä»£ç ][é”™è¯¯åºå·]
```

ç¤ºä¾‹ï¼š`10001001`
- `10` - ç”¨æˆ·æœåŠ¡
- `001` - æ³¨å†Œæ¨¡å—
- `001` - å…·ä½“é”™è¯¯

### 2. HTTP çŠ¶æ€ç æ˜ å°„
| HTTPçŠ¶æ€ç  | è¯´æ˜ | ä½¿ç”¨åœºæ™¯ |
|-----------|------|---------|
| 200 | æˆåŠŸ | è¯·æ±‚æˆåŠŸ |
| 400 | è¯·æ±‚é”™è¯¯ | å‚æ•°é”™è¯¯ã€ä¸šåŠ¡é€»è¾‘é”™è¯¯ |
| 401 | æœªæˆæƒ | Tokenæ— æ•ˆæˆ–è¿‡æœŸ |
| 403 | ç¦æ­¢è®¿é—® | æƒé™ä¸è¶³ |
| 404 | èµ„æºä¸å­˜åœ¨ | æ‰¾ä¸åˆ°èµ„æº |
| 409 | èµ„æºå†²çª | æ•°æ®å†²çª |
| 429 | è¯·æ±‚è¿‡å¤š | è§¦å‘é™æµ |
| 500 | æœåŠ¡å™¨é”™è¯¯ | ç³»ç»Ÿå†…éƒ¨é”™è¯¯ |
| 503 | æœåŠ¡ä¸å¯ç”¨ | æœåŠ¡é™çº§æˆ–ç†”æ–­ |

---

## ğŸ”¢ æœåŠ¡ä»£ç å®šä¹‰

| æœåŠ¡ä»£ç  | æœåŠ¡åç§° | è¯´æ˜ |
|---------|---------|------|
| 10 | user-service | ç”¨æˆ·æœåŠ¡ |
| 20 | message-service | æ¶ˆæ¯æœåŠ¡ |
| 30 | group-service | ç¾¤ç»„æœåŠ¡ |
| 40 | presence-service | åœ¨çº¿çŠ¶æ€æœåŠ¡ |
| 50 | file-service | æ–‡ä»¶æœåŠ¡ |
| 60 | push-service | æ¨é€æœåŠ¡ |
| 70 | search-service | æœç´¢æœåŠ¡ |
| 80 | media-service | éŸ³è§†é¢‘æœåŠ¡ |
| 90 | gateway-service | ç½‘å…³æœåŠ¡ |
| 11 | organization-service | ç»„ç»‡æ¶æ„æœåŠ¡ |
| 12 | calendar-service | æ—¥ç¨‹æœåŠ¡ |
| 13 | task-service | ä»»åŠ¡æœåŠ¡ |
| 14 | meeting-service | ä¼šè®®æœåŠ¡ |
| 15 | bot-service | æœºå™¨äººæœåŠ¡ |

---

## ğŸ“– è¯¦ç»†é”™è¯¯ç åˆ—è¡¨

### ç”¨æˆ·æœåŠ¡ (10xxx)

#### æ³¨å†Œæ¨¡å— (10001xxx)
| é”™è¯¯ç  | HTTPçŠ¶æ€ç  | é”™è¯¯ä¿¡æ¯ | è¯´æ˜ |
|--------|-----------|---------|------|
| 10001001 | 400 | ç”¨æˆ·åå·²å­˜åœ¨ | æ³¨å†Œæ—¶ç”¨æˆ·åé‡å¤ |
| 10001002 | 400 | é‚®ç®±å·²è¢«æ³¨å†Œ | æ³¨å†Œæ—¶é‚®ç®±é‡å¤ |
| 10001003 | 400 | æ‰‹æœºå·å·²è¢«æ³¨å†Œ | æ³¨å†Œæ—¶æ‰‹æœºå·é‡å¤ |
| 10001004 | 400 | å¯†ç å¼ºåº¦ä¸è¶³ | å¯†ç ä¸ç¬¦åˆå®‰å…¨è¦æ±‚ |
| 10001005 | 400 | éªŒè¯ç é”™è¯¯ | é‚®ç®±/çŸ­ä¿¡éªŒè¯ç é”™è¯¯ |
| 10001006 | 400 | éªŒè¯ç å·²è¿‡æœŸ | éªŒè¯ç è¶…æ—¶ |

#### ç™»å½•æ¨¡å— (10002xxx)
| é”™è¯¯ç  | HTTPçŠ¶æ€ç  | é”™è¯¯ä¿¡æ¯ | è¯´æ˜ |
|--------|-----------|---------|------|
| 10002001 | 401 | ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ | ç™»å½•å‡­è¯é”™è¯¯ |
| 10002002 | 401 | è´¦å·å·²è¢«ç¦ç”¨ | ç”¨æˆ·è´¦å·è¢«å°ç¦ |
| 10002003 | 401 | è´¦å·å·²è¢«é”å®š | ç™»å½•å¤±è´¥æ¬¡æ•°è¿‡å¤š |
| 10002004 | 401 | Tokenå·²è¿‡æœŸ | JWT Tokenè¿‡æœŸ |
| 10002005 | 401 | Tokenæ— æ•ˆ | JWT Tokenæ ¼å¼é”™è¯¯ |
| 10002006 | 429 | ç™»å½•æ¬¡æ•°è¿‡å¤š | è§¦å‘ç™»å½•é™æµ |

#### ç”¨æˆ·ä¿¡æ¯æ¨¡å— (10003xxx)
| é”™è¯¯ç  | HTTPçŠ¶æ€ç  | é”™è¯¯ä¿¡æ¯ | è¯´æ˜ |
|--------|-----------|---------|------|
| 10003001 | 404 | ç”¨æˆ·ä¸å­˜åœ¨ | æ‰¾ä¸åˆ°æŒ‡å®šç”¨æˆ· |
| 10003002 | 403 | æ— æƒé™è®¿é—® | æ— æƒæŸ¥çœ‹å…¶ä»–ç”¨æˆ·ä¿¡æ¯ |
| 10003003 | 400 | æ˜µç§°é•¿åº¦è¶…é™ | æ˜µç§°è¿‡é•¿ |
| 10003004 | 400 | å¤´åƒæ ¼å¼é”™è¯¯ | å¤´åƒURLæ ¼å¼é”™è¯¯ |

#### å¥½å‹æ¨¡å— (10004xxx)
| é”™è¯¯ç  | HTTPçŠ¶æ€ç  | é”™è¯¯ä¿¡æ¯ | è¯´æ˜ |
|--------|-----------|---------|------|
| 10004001 | 400 | å·²ç»æ˜¯å¥½å‹å…³ç³» | é‡å¤æ·»åŠ å¥½å‹ |
| 10004002 | 400 | å¥½å‹ç”³è¯·å·²å­˜åœ¨ | é‡å¤å‘é€å¥½å‹ç”³è¯· |
| 10004003 | 404 | å¥½å‹ç”³è¯·ä¸å­˜åœ¨ | æ‰¾ä¸åˆ°å¥½å‹ç”³è¯· |
| 10004004 | 400 | ä¸èƒ½æ·»åŠ è‡ªå·±ä¸ºå¥½å‹ | é€»è¾‘é”™è¯¯ |
| 10004005 | 400 | å¥½å‹æ•°é‡å·²è¾¾ä¸Šé™ | è¶…è¿‡å¥½å‹æ•°é‡é™åˆ¶ |

---

### æ¶ˆæ¯æœåŠ¡ (20xxx)

#### å‘é€æ¶ˆæ¯æ¨¡å— (20001xxx)
| é”™è¯¯ç  | HTTPçŠ¶æ€ç  | é”™è¯¯ä¿¡æ¯ | è¯´æ˜ |
|--------|-----------|---------|------|
| 20001001 | 400 | æ¶ˆæ¯å†…å®¹ä¸ºç©º | æ¶ˆæ¯å†…å®¹ä¸èƒ½ä¸ºç©º |
| 20001002 | 400 | æ¶ˆæ¯å†…å®¹è¿‡é•¿ | è¶…è¿‡æ¶ˆæ¯é•¿åº¦é™åˆ¶ |
| 20001003 | 403 | ä¸æ˜¯å¥½å‹ï¼Œæ— æ³•å‘é€æ¶ˆæ¯ | éå¥½å‹å…³ç³» |
| 20001004 | 403 | å¯¹æ–¹å·²å°†ä½ æ‹‰é»‘ | è¢«å¯¹æ–¹å±è”½ |
| 20001005 | 400 | æ¶ˆæ¯ç±»å‹ä¸æ”¯æŒ | ä¸æ”¯æŒçš„æ¶ˆæ¯ç±»å‹ |
| 20001006 | 429 | å‘é€æ¶ˆæ¯è¿‡äºé¢‘ç¹ | è§¦å‘é™æµ |
| 20001007 | 400 | æ–‡ä»¶å¤§å°è¶…é™ | æ–‡ä»¶è¿‡å¤§ |

#### æ¶ˆæ¯ç®¡ç†æ¨¡å— (20002xxx)
| é”™è¯¯ç  | HTTPçŠ¶æ€ç  | é”™è¯¯ä¿¡æ¯ | è¯´æ˜ |
|--------|-----------|---------|------|
| 20002001 | 404 | æ¶ˆæ¯ä¸å­˜åœ¨ | æ‰¾ä¸åˆ°æŒ‡å®šæ¶ˆæ¯ |
| 20002002 | 403 | æ— æƒé™æ’¤å›æ¶ˆæ¯ | ä¸æ˜¯æ¶ˆæ¯å‘é€è€… |
| 20002003 | 400 | è¶…è¿‡æ’¤å›æ—¶é—´é™åˆ¶ | è¶…è¿‡2åˆ†é’Ÿ |
| 20002004 | 400 | æ¶ˆæ¯å·²è¢«æ’¤å› | é‡å¤æ’¤å› |
| 20002005 | 400 | æ¶ˆæ¯å·²è¢«åˆ é™¤ | æ¶ˆæ¯å·²åˆ é™¤ |

---

### ç¾¤ç»„æœåŠ¡ (30xxx)

#### ç¾¤ç»„ç®¡ç†æ¨¡å— (30001xxx)
| é”™è¯¯ç  | HTTPçŠ¶æ€ç  | é”™è¯¯ä¿¡æ¯ | è¯´æ˜ |
|--------|-----------|---------|------|
| 30001001 | 400 | ç¾¤ç»„åç§°å·²å­˜åœ¨ | ç¾¤åé‡å¤ |
| 30001002 | 404 | ç¾¤ç»„ä¸å­˜åœ¨ | æ‰¾ä¸åˆ°ç¾¤ç»„ |
| 30001003 | 403 | æ— æƒé™æ“ä½œ | ä¸æ˜¯ç¾¤ä¸»æˆ–ç®¡ç†å‘˜ |
| 30001004 | 400 | ç¾¤ç»„äººæ•°å·²è¾¾ä¸Šé™ | è¶…è¿‡ç¾¤æˆå‘˜é™åˆ¶ |
| 30001005 | 400 | ä¸åœ¨ç¾¤ç»„ä¸­ | ç”¨æˆ·ä¸æ˜¯ç¾¤æˆå‘˜ |
| 30001006 | 403 | å·²è¢«ç§»å‡ºç¾¤ç»„ | è¢«è¸¢å‡ºç¾¤ |
| 30001007 | 400 | ç¾¤ç»„å·²è§£æ•£ | ç¾¤ç»„ä¸å­˜åœ¨ |

#### ç¾¤æˆå‘˜æ¨¡å— (30002xxx)
| é”™è¯¯ç  | HTTPçŠ¶æ€ç  | é”™è¯¯ä¿¡æ¯ | è¯´æ˜ |
|--------|-----------|---------|------|
| 30002001 | 400 | ç”¨æˆ·å·²åœ¨ç¾¤ç»„ä¸­ | é‡å¤æ·»åŠ  |
| 30002002 | 403 | éœ€è¦ç®¡ç†å‘˜å®¡æ‰¹ | åŠ ç¾¤éœ€å®¡æ‰¹ |
| 30002003 | 403 | ä¸èƒ½ç§»é™¤ç¾¤ä¸» | é€»è¾‘é”™è¯¯ |
| 30002004 | 403 | ä¸èƒ½ç§»é™¤ç®¡ç†å‘˜ | æƒé™ä¸è¶³ |

---

### æ–‡ä»¶æœåŠ¡ (50xxx)

#### æ–‡ä»¶ä¸Šä¼ æ¨¡å— (50001xxx)
| é”™è¯¯ç  | HTTPçŠ¶æ€ç  | é”™è¯¯ä¿¡æ¯ | è¯´æ˜ |
|--------|-----------|---------|------|
| 50001001 | 400 | æ–‡ä»¶ä¸ºç©º | æœªä¸Šä¼ æ–‡ä»¶ |
| 50001002 | 400 | æ–‡ä»¶å¤§å°è¶…é™ | æ–‡ä»¶è¿‡å¤§ |
| 50001003 | 400 | æ–‡ä»¶ç±»å‹ä¸æ”¯æŒ | ä¸æ”¯æŒçš„æ–‡ä»¶æ ¼å¼ |
| 50001004 | 400 | æ–‡ä»¶åéæ³• | æ–‡ä»¶ååŒ…å«éæ³•å­—ç¬¦ |
| 50001005 | 507 | å­˜å‚¨ç©ºé—´ä¸è¶³ | ç”¨æˆ·ç©ºé—´å·²æ»¡ |
| 50001006 | 500 | æ–‡ä»¶ä¸Šä¼ å¤±è´¥ | ä¸Šä¼ è¿‡ç¨‹å‡ºé”™ |

#### æ–‡ä»¶ä¸‹è½½æ¨¡å— (50002xxx)
| é”™è¯¯ç  | HTTPçŠ¶æ€ç  | é”™è¯¯ä¿¡æ¯ | è¯´æ˜ |
|--------|-----------|---------|------|
| 50002001 | 404 | æ–‡ä»¶ä¸å­˜åœ¨ | æ‰¾ä¸åˆ°æ–‡ä»¶ |
| 50002002 | 403 | æ— æƒé™ä¸‹è½½ | æƒé™ä¸è¶³ |
| 50002003 | 410 | æ–‡ä»¶å·²è¿‡æœŸ | æ–‡ä»¶å·²åˆ é™¤ |
| 50002004 | 500 | æ–‡ä»¶è¯»å–å¤±è´¥ | è¯»å–å‡ºé”™ |

---

### éŸ³è§†é¢‘æœåŠ¡ (80xxx)

#### é€šè¯æ¨¡å— (80001xxx)
| é”™è¯¯ç  | HTTPçŠ¶æ€ç  | é”™è¯¯ä¿¡æ¯ | è¯´æ˜ |
|--------|-----------|---------|------|
| 80001001 | 400 | å¯¹æ–¹æ­£åœ¨é€šè¯ä¸­ | å¯¹æ–¹å¿™çº¿ |
| 80001002 | 400 | å¯¹æ–¹å·²æ‹’ç» | æ‹’ç»æ¥å¬ |
| 80001003 | 408 | å‘¼å«è¶…æ—¶ | æ— äººæ¥å¬ |
| 80001004 | 503 | åª’ä½“æœåŠ¡ä¸å¯ç”¨ | WebRTCæœåŠ¡å¼‚å¸¸ |
| 80001005 | 400 | é€šè¯å·²ç»“æŸ | é€šè¯å·²æŒ‚æ–­ |

---

### ç½‘å…³æœåŠ¡ (90xxx)

#### é™æµæ¨¡å— (90001xxx)
| é”™è¯¯ç  | HTTPçŠ¶æ€ç  | é”™è¯¯ä¿¡æ¯ | è¯´æ˜ |
|--------|-----------|---------|------|
| 90001001 | 429 | è¯·æ±‚è¿‡äºé¢‘ç¹ | è§¦å‘é™æµ |
| 90001002 | 429 | IPè¢«é™æµ | IPé™æµ |
| 90001003 | 429 | ç”¨æˆ·è¢«é™æµ | ç”¨æˆ·é™æµ |

#### ç†”æ–­æ¨¡å— (90002xxx)
| é”™è¯¯ç  | HTTPçŠ¶æ€ç  | é”™è¯¯ä¿¡æ¯ | è¯´æ˜ |
|--------|-----------|---------|------|
| 90002001 | 503 | æœåŠ¡æš‚æ—¶ä¸å¯ç”¨ | æœåŠ¡ç†”æ–­ |
| 90002002 | 503 | æœåŠ¡é™çº§ä¸­ | æœåŠ¡é™çº§ |

---

## ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹

### Java åç«¯
```java
public class ErrorCode {
    // ç”¨æˆ·æœåŠ¡
    public static final int USER_NOT_FOUND = 10003001;
    public static final int USERNAME_EXISTS = 10001001;
    public static final int INVALID_PASSWORD = 10002001;
    
    // æ¶ˆæ¯æœåŠ¡
    public static final int MESSAGE_TOO_LONG = 20001002;
    public static final int NOT_FRIEND = 20001003;
    
    // ç¾¤ç»„æœåŠ¡
    public static final int GROUP_NOT_FOUND = 30001002;
    public static final int GROUP_FULL = 30001004;
}

// ä½¿ç”¨
throw new BusinessException(ErrorCode.USER_NOT_FOUND, "ç”¨æˆ·ä¸å­˜åœ¨");
```

### å‰ç«¯å¤„ç†
```javascript
// é”™è¯¯å¤„ç†
axios.interceptors.response.use(
  response => response,
  error => {
    const { code, message } = error.response.data;
    
    switch(code) {
      case 10002004: // Tokenè¿‡æœŸ
        // åˆ·æ–°Tokenæˆ–è·³è½¬ç™»å½•
        refreshToken();
        break;
      case 10002001: // ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯
        showError('ç™»å½•å¤±è´¥ï¼š' + message);
        break;
      case 429: // é™æµ
        showError('æ“ä½œè¿‡äºé¢‘ç¹ï¼Œè¯·ç¨åå†è¯•');
        break;
      default:
        showError(message || 'ç³»ç»Ÿé”™è¯¯');
    }
  }
);
```

---

## ğŸ“ é”™è¯¯å“åº”æ ¼å¼

### æ ‡å‡†æ ¼å¼
```json
{
  "code": 10003001,
  "message": "ç”¨æˆ·ä¸å­˜åœ¨",
  "data": null,
  "timestamp": 1699612345678,
  "path": "/api/v1/users/10001",
  "traceId": "trace-123456"
}
```

### å­—æ®µè¯´æ˜
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| code | integer | é”™è¯¯ç  |
| message | string | é”™è¯¯ä¿¡æ¯ |
| data | object | é¢å¤–æ•°æ®ï¼ˆå¯é€‰ï¼‰ |
| timestamp | long | æ—¶é—´æˆ³ |
| path | string | è¯·æ±‚è·¯å¾„ |
| traceId | string | é“¾è·¯è¿½è¸ªID |

---

## ğŸ” é”™è¯¯ç æŸ¥è¯¢å·¥å…·

### åœ¨çº¿æŸ¥è¯¢
è®¿é—®ï¼š`http://your-domain/api/errors/{errorCode}`

### å‘½ä»¤è¡ŒæŸ¥è¯¢
```bash
curl http://localhost:8080/api/errors/10003001
```

å“åº”ï¼š
```json
{
  "errorCode": 10003001,
  "service": "user-service",
  "module": "ç”¨æˆ·ä¿¡æ¯æ¨¡å—",
  "httpStatus": 404,
  "message": "ç”¨æˆ·ä¸å­˜åœ¨",
  "solution": "è¯·æ£€æŸ¥ç”¨æˆ·IDæ˜¯å¦æ­£ç¡®"
}
```

---

## ğŸ“š æœ€ä½³å®è·µ

### 1. é”™è¯¯ç å‘½åè§„èŒƒ
- ä½¿ç”¨å¸¸é‡å®šä¹‰ï¼Œä¸è¦ç¡¬ç¼–ç 
- å‘½åè¦æ¸…æ™°ï¼Œè§åçŸ¥æ„
- æŒ‰æ¨¡å—åˆ†ç»„ç®¡ç†

### 2. é”™è¯¯ä¿¡æ¯è§„èŒƒ
- é”™è¯¯ä¿¡æ¯è¦æ¸…æ™°æ˜ç¡®
- é¿å…æš´éœ²æ•æ„Ÿä¿¡æ¯
- æä¾›è§£å†³å»ºè®®

### 3. æ—¥å¿—è®°å½•
```java
log.error("ç”¨æˆ·ç™»å½•å¤±è´¥, userId={}, errorCode={}, message={}", 
    userId, ErrorCode.INVALID_PASSWORD, "å¯†ç é”™è¯¯");
```

### 4. å›½é™…åŒ–æ”¯æŒ
```java
@GetMapping("/users/{id}")
public Result getUser(@PathVariable Long id, Locale locale) {
    if (user == null) {
        String message = messageSource.getMessage(
            "error.user.not.found", null, locale);
        throw new BusinessException(ErrorCode.USER_NOT_FOUND, message);
    }
}
```

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0.0  
**æœ€åæ›´æ–°**: 2025-11-10  
**ç»´æŠ¤äºº**: å¼€å‘å›¢é˜Ÿ
